<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="copyright" content="Timothy Pratley"><title>Advanced Topics</title><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" name="viewport"><link href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/reveal.css" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/theme/simple.css" id="theme"><link href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/lib/css/zenburn.css" rel="stylesheet"><script>var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match( /print-pdf/gi ) ? "https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/print/pdf.css" : "https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/print/paper.css";
document.getElementsByTagName( 'head' )[0].appendChild( link );</script><!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/lib/js/html5shiv.js"></script><![endif]--><link rel="stylesheet" href="slides.css"></head><body><div class="reveal"><div class="slides"><section class="title" data-state="title"><h1>Advanced Topics</h1></section><section id="topics_to_be_covered"><h2>Topics to be covered</h2><div class="olist arabic"><ol class="arabic"><li><p>Use case: How to define mass data structure using spec and to get the data from that using “conform”.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Need sample use case and accustomed project with that.</p></li><li><p>Require more details on why we need this spec and what is the business advantage?</p></li></ol></div></li><li><p>Use case: To mock test data for resources on validating the specs as a whole data structure. (A sample project or reference available on internet is also required)</p></li><li><p>How to get the project built using Jenkins or any hosting tools. We would have a demo to do that with pipeline or docker plugin.</p></li><li><p>How to call web services from clojure &amp; to hop around the different environments? How are we going to handle/pass the security configuration in between the layers?</p></li><li><p>We use “:gen-class” for all the namespace definition. Is this mandatory for running the application as uber jar? What is the purpose of including this :gen-class?</p></li><li><p>More examples (different usage scenarios) and elaboration required for Macros.</p></li><li><p>Use case: Require to know Clojure with Hadoop interaction for data enrichment with clojure specs.</p></li><li><p>Does clojure provide any utility to attach a file and send an email? Configuring logs on masking the sensitive data.</p></li><li><p>How to manage real time dependency management between projects</p></li><li><p>Any industry design patterns for clojure?</p></li><li><p>What is Profile.clj capable of doing? Is it like getting the jar from repo, defining plugins, is that all? Or do we have more to explore. (need more clarity and reference links)</p></li><li><p>What is Project.clj capable of doing to the project level and where does this scope live? Unlike the above one, require reference materials.</p></li></ol></div></section>
<section id="use_case_parsing_data_with_spec"><h2>1) Use case: Parsing data with Spec</h2><div class="paragraph"><p>Insurance company "Megacorp" offers three pet insurance policies:</p></div>
<div class="ulist"><ul><li><p><a href="http://s3.amazonaws.com/cdn-origin-etr.akc.org/wp-content/uploads/2017/11/12225919/Pembroke-Welsh-Corgi-On-White-01.jpg">Corgi Cover</a></p></li><li><p><a href="http://s3.amazonaws.com/cdn-origin-etr.akc.org/wp-content/uploads/2017/11/12225538/Poodle-On-White-03.jpg">Poodle Protection</a></p></li><li><p><a href="https://i.pinimg.com/originals/a1/7f/22/a17f22f3f0067c6ff9d2023c4f57bd87.jpg">Poodle Protection Platinum</a></p></li></ul></div>
<div class="paragraph"><p>Can spec help us process applications for these policies?</p></div></section>
<section id="a_defining_specs_for_data_structures"><h2>a. Defining specs for data structures</h2><div class="ulist"><ul><li><p>See examples/parsing-with-spec</p></li></ul></div></section>
<section id="b_validating_data"><h2>b. Validating data</h2><div class="paragraph"><p>(valid?)
expound</p></div></section>
<section id="c_extracting_data_using_conform"><h2>c. Extracting data using <code>conform</code></h2><div class="ulist"><ul><li><p>When there are multiple options to match against</p></li></ul></div></section>
<section id="spec_rationale"><h2>Spec rationale</h2><div class="ulist"><ul><li><p>It is a guiding principle of Clojure to represent information as data (not objects)</p></li><li><p>Important properties of Clojure systems are represented and conveyed by the shape of the data</p><div class="ulist"><ul><li><p>runtime types are maps, vectors, sets</p></li><li><p>shape is not captured or checked anywhere</p></li></ul></div></li><li><p>Manual parsing and error reporting is not good enough</p></li><li><p>Defining specifications is optional</p></li></ul></div></section>
<section id="spec_enables_automatic"><h2>Spec enables automatic</h2><div class="ulist"><ul><li><p>Validation</p></li><li><p>Error reporting</p></li><li><p>Destructuring</p></li><li><p>Instrumentation</p></li><li><p>Test-data generation</p></li><li><p>Generative test generation</p></li></ul></div></section>
<section id="why_not_spec"><h2>Why not spec?</h2><div class="ulist"><ul><li><p>It is new</p></li><li><p>Specs are code</p><div class="ulist"><ul><li><p>however code is data and you can create specs on the fly</p></li></ul></div></li><li><p>You can do without it</p><div class="ulist"><ul><li><p>however manual approaches become difficult as complexity rises</p></li></ul></div></li></ul></div></section>
<section id="why_spec"><h2>Why spec?</h2><div class="ulist"><ul><li><p>Specifying the shape of inputs is hard</p><div class="ulist"><ul><li><p>good error messages are hard for complex requirements</p></li><li><p>coming up with test data can be tedious</p></li><li><p>testing often involves reimplementation</p></li></ul></div></li><li><p>Additional tooling</p><div class="ulist"><ul><li><p>Expound (nice error messages)</p></li><li><p>Data generators</p></li><li><p>test.check</p></li></ul></div></li></ul></div></section>
<section id="d_what_is_the_business_advantage_of_spec"><h2>d. What is the business advantage of spec?</h2><div class="ulist"><ul><li><p>Implement validation quickly</p></li><li><p>Implement parsing quickly</p></li><li><p>Deliver correct, well tested solutions</p></li><li><p>Use the same technology in code and data interfaces</p><div class="ulist"><ul><li><p>learn once, apply in many contexts</p></li></ul></div></li></ul></div></section>
<section id="mock_test_data"><h2>2) Mock test data</h2><div class="paragraph"><p>see examples/parsing-with-spec/test/parsing-with-spec/generated-test</p></div>
<div class="literalblock"><div class="content"><pre>(gen/sample (s/gen :mega-corp/insurance-policy))</pre></div></div>
<div class="literalblock"><div class="content"><pre>(stest/check `my-function)</pre></div></div></section>
<section><section id="continuous_integration"><h2>3) Continuous Integration</h2><div class="ulist"><ul><li><p>Building projects with Jenkins</p><div class="ulist"><ul><li><p>See examples/jenkins-build-server</p></li></ul></div></li></ul></div></section><section id="overview"><h2>Overview</h2><div class="ulist"><ul><li><p>How Clojure projects are built and executed locally</p></li><li><p>How to set up a build server to automate test/build/deploy</p></li></ul></div></section></section>
<section id="building_and_executing_clojure_projects"><h2>Building and Executing Clojure projects</h2><div class="literalblock"><div class="content"><pre>lein run</pre></div></div>
<div class="literalblock"><div class="content"><pre>lein uberjar</pre></div></div>
<div class="literalblock"><div class="content"><pre>java -jar myapp.jar</pre></div></div>
<div class="literalblock"><div class="content"><pre>lein ring uberjar</pre></div></div>
<div class="literalblock"><div class="content"><pre>lein install</pre></div></div>
<div class="literalblock"><div class="content"><pre>lein deploy</pre></div></div></section>
<section id="lein_run"><h2>lein run</h2><div class="ulist"><ul><li><p>Easy to execute</p></li><li><p>May need to pull dependencies</p></li></ul></div></section>
<section id="lein_uberjar"><h2>lein uberjar</h2><div class="ulist"><ul><li><p>Your application and all dependencies in a single JAR file</p></li><li><p>Easy to deploy</p></li><li><p>Easy to execute</p></li><li><p>Versioned</p></li><li><p>Preservable</p></li></ul></div></section>
<section id="java_jar_myapp_jar"><h2>java -jar myapp.jar</h2><div class="ulist"><ul><li><p>Executes an uberjar</p></li><li><p>Define a main entrypoint in project.clj</p><div class="literalblock"><div class="content"><pre>:main myapp.core</pre></div></div></li></ul></div>
<div class="paragraph"><p>src/myapp/core.clj</p></div>
<div class="literalblock"><div class="content"><pre>(ns myapp.core)
(defn -main [&amp; args] ...)</pre></div></div>
<div class="ulist"><ul><li><p>Alternatively, specify an entrypoint from the commandline</p><div class="literalblock"><div class="content"><pre>java -jar myapp.jar -m myapp.core/-main</pre></div></div></li></ul></div></section>
<section id="lein_ring_uberjar"><h2>lein ring uberjar</h2><div class="paragraph"><p>Sets up a main entry point to start the webservice</p></div>
<div class="paragraph"><p>Equivalent to</p></div>
<div class="literalblock"><div class="content"><pre>(ns myapp.core)
(defn -main [&amp; args]
  (run-jetty handler {:port 3000}))</pre></div></div></section>
<section id="lein_install"><h2>lein install</h2><div class="ulist"><ul><li><p>Builds an uberjar and puts it in your local Maven repository <code>~/.m2</code></p></li><li><p>Useful for testing library snapshots and building from source</p></li><li><p>Does not publish your artifact</p></li></ul></div></section>
<section id="lein_deploy"><h2>lein deploy</h2><div class="ulist"><ul><li><p>Publishes your artifact to a repository</p></li><li><p>Repositories can be</p><div class="ulist"><ul><li><p>public (Clojars, Maven Central)</p></li><li><p>private (Hosted/S3/Self managed)</p></li></ul></div></li><li><p><a href="https://github.com/technomancy/leiningen/blob/master/doc/DEPLOY.md" class="bare">https://github.com/technomancy/leiningen/blob/master/doc/DEPLOY.md</a></p></li><li><p>Easy&#8230;&#8203; if you have a repository&#8230;&#8203;</p></li><li><p>Not the same as deploying your application!</p></li></ul></div></section>
<section id="where_to_publish_artifacts_to"><h2>Where to publish artifacts to?</h2><div class="ulist"><ul><li><p>Amazon S3 is a low-maintenance choice:</p><div class="ulist"><ul><li><p><a href="https://github.com/s3-wagon-private/s3-wagon-private" class="bare">https://github.com/s3-wagon-private/s3-wagon-private</a></p></li></ul></div></li><li><p>Artifactory/Nexus/Archiva</p></li><li><p>Deps: <a href="https://www.deps.co/" class="bare">https://www.deps.co/</a></p></li><li><p>Remeber to include a <code>repositories</code> section in your project.clj</p><div class="ulist"><ul><li><p>To publish to a private repository</p></li><li><p>To pull dependencies from a private repository</p><div class="literalblock"><div class="content"><pre>:repositories [["private" {:url "s3p://mybucket/releases/" :no-auth true}]]</pre></div></div></li></ul></div></li></ul></div></section>
<section id="deploying_a_clojure_application"><h2>Deploying a Clojure application</h2><div class="ulist"><ul><li><p>Build an uberjar (or Docker container)</p></li><li><p>Get the artifact to the host server</p></li><li><p>Run it</p></li></ul></div></section>
<section id="implementation_details_are_driven_by_architecture"><h2>Implementation details are driven by architecture</h2><div class="ulist"><ul><li><p>Tomcat? Drop a WAR in a folder</p></li><li><p>AWS Elastic Beanstalk? Roll out a new docker container</p></li><li><p>AWS Lambda? Upload a new JAR</p></li><li><p>Kubernetes? Roll out a new docker container</p></li><li><p>Heroku? Deploy from git</p></li></ul></div></section>
<section id="creating_a_build_server_overview"><h2>Creating a build server overview</h2><div class="ulist"><ul><li><p>Install Jenkins</p></li><li><p>Install Leiningen</p></li><li><p>Add a build</p></li></ul></div></section>
<section id="what_is_docker"><h2>What is Docker?</h2><div class="ulist"><ul><li><p>Virtualization</p></li><li><p>Dockerfile specifies a parent and setup tasks</p></li><li><p>Building starts with an image and runs the setup tasks, creates a container</p></li><li><p>Run a container and it behaves like a stand alone computer</p></li></ul></div></section>
<section id="handy_docker_commands"><h2>Handy Docker commands</h2><div class="ulist"><ul><li><p><code>docker build -t &lt;image-name&gt; .</code> to create a container from a Dockerfile</p></li><li><p><code>docker run &lt;image-name&gt;</code> to run it</p></li><li><p><code>docker ps</code> to see running containers</p></li><li><p><code>docker exec -ti &lt;container-id&gt; bash</code> to get a shell in a running container</p></li><li><p><code>docker stop &lt;container-id&gt;</code> to stop it</p></li></ul></div></section>
<section id="creating_a_jenkins_server_inside_a_docker_container"><h2>Creating a Jenkins server inside a Docker container</h2><div class="ulist"><ul><li><p>Install docker</p></li><li><p>Create a Dockerfile to extend the base Jenkins image</p><div class="ulist"><ul><li><p>see examples/jenkins-build-server/Dockerfile</p></li><li><p><a href="https://github.com/jenkinsci/docker/blob/master/README.md" class="bare">https://github.com/jenkinsci/docker/blob/master/README.md</a></p></li><li><p>add steps to install Leiningen</p></li></ul></div></li><li><p>Create a Makefile or similar to automate tasks</p><div class="ulist"><ul><li><p>see examples/jenkins-build-server/Makefile</p></li><li><p><code>make run</code> to start the server</p></li></ul></div></li><li><p>Open the UI: <a href="http://localhost:8080/" class="bare">http://localhost:8080/</a></p></li><li><p>Enter password from console log</p></li><li><p>Install suggested plugins</p></li><li><p>Create admin user</p></li></ul></div></section>
<section id="what_to_build"><h2>What to build?</h2><div class="ulist"><ul><li><p>An uberjar</p></li><li><p>Docker image</p></li></ul></div></section>
<section id="set_up_job"><h2>Set up Job</h2><div class="ulist"><ul><li><p>Choose Freestyle project</p></li><li><p>Configure source code management</p><div class="ulist"><ul><li><p>parsing-with-spec is a subdirectory of the enterprise-clojure repository</p></li><li><p><code>sparse checkout path</code> only gets a subdirectory</p></li></ul></div></li><li><p>Under "Build", add build steps, shell command</p><div class="ulist"><ul><li><p><code>cd examples/parsing-with-spec &amp;&amp; lein test</code></p></li><li><p><code>cd examples/parsing-with-spec &amp;&amp; lein install</code></p></li><li><p>or docker build</p></li><li><p>don&#8217;t need to change directory if project is in root</p></li></ul></div></li><li><p>Save</p></li><li><p>Build now</p></li><li><p>Check the console logs</p><div class="ulist"><ul><li><p>tests passed</p></li><li><p>jar created</p></li></ul></div></li></ul></div></section>
<section id="versioning"><h2>Versioning</h2></section>
<section id="running_the_built_artifacts"><h2>Running the built artifacts</h2><div class="ulist"><ul><li><p><code>java -jar myapp.jar</code></p></li><li><p>Use environment variables to behave differently</p></li><li><p>Can extend a prebuilt docker image (or roll your own)</p></li></ul></div></section>
<section id="building_multiple_services"><h2>Building multiple services</h2><div class="ulist"><ul><li><p>Set up jobs for each project</p></li></ul></div></section>
<section id="set_up_another_triggered_job_to_deploy_to_ci"><h2>Set up another triggered Job to deploy to CI</h2><div class="ulist"><ul><li><p>If the build succeeds, deploy</p></li></ul></div></section>
<section><section id="clojure_services"><h2>4) Clojure services</h2></section><section id="a_creating_a_webservice"><h2>a. Creating a webservice</h2><div class="paragraph"><p><code>lein new compojure customer-data-service</code></p></div>
<div class="ulist"><ul><li><p>See routes</p></li><li><p>Start: <code>lein ring server-headless</code></p></li><li><p>Test: <code>curl <a href="http://localhost:3000/" class="bare">http://localhost:3000/</a></code></p></li><li><p>Change code</p></li><li><p>curl again</p></li></ul></div></section></section>
<section id="what_is_ring"><h2>What is Ring?</h2><div class="ulist"><ul><li><p>Ring is a library that abstracts the details of HTTP into a unified API</p><div class="ulist"><ul><li><p>modular components</p></li></ul></div></li><li><p>Handlers - functions that take requests and return responses</p></li><li><p>Request - map of data about the request (params, body, etc)</p></li><li><p>Response - map containing status, headers, body</p></li><li><p>Middleware - the mechanism for modular components, higher order functions</p></li></ul></div></section>
<section id="middleware_pattern"><h2>Middleware pattern</h2><div class="paragraph"><p>Middleware are functions that return functions:</p></div>
<div class="literalblock"><div class="content"><pre>(defn wrap-user [handler]
  (fn [request]
    (if-let [user-id (-&gt; request :session :user-id)]
      (let [user (get-user-by-id user-id)]
        (handler (assoc request :user user)))
      (handler request))))</pre></div></div>
<div class="ulist"><ul><li><p>Takes a handler as input</p></li><li><p>The function returned</p><div class="ulist"><ul><li><p>can modify the request before passing it to the handler</p></li><li><p>can modify the result from the handler before returning it</p></li><li><p>is itself a handler</p></li></ul></div></li></ul></div></section>
<section id="middleware"><h2>Middleware</h2><div class="ulist"><ul><li><p>Takes a handler and creates an augmented handler.</p></li><li><p>Convenient for composing handlers together:</p><div class="literalblock"><div class="content"><pre>(def app
  (-&gt; handler
      (wrap-user)
      (wrap-content-type "text/html")
      (wrap-keyword-params)
      (wrap-params)))</pre></div></div></li><li><p>Middleware pattern</p><div class="ulist"><ul><li><p><a href="https://github.com/ring-clojure/ring/wiki/Concepts" class="bare">https://github.com/ring-clojure/ring/wiki/Concepts</a></p></li><li><p><a href="https://github.com/ring-clojure/ring/wiki/Middleware-Patterns" class="bare">https://github.com/ring-clojure/ring/wiki/Middleware-Patterns</a></p></li></ul></div></li></ul></div></section>
<section id="what_is_compojure"><h2>What is Compojure?</h2><div class="ulist"><ul><li><p>A routing library</p><div class="ulist"><ul><li><p><a href="http://megacorp.com/insurance-policy/corgi-cover" class="bare">http://megacorp.com/insurance-policy/corgi-cover</a></p></li><li><p><code>/insurance-policy/corgi-cover</code> is a route</p></li><li><p><code>/insurance-policy</code> is fixed root</p></li><li><p><code>/corgi-cover</code> is a policy ID</p></li><li><p>could be <code>poodle-protection</code> or <code>poodle-protection-platinum</code></p></li><li><p><code>(GET "/insurance-policy/:id" [id] (fetch-policy id))</code></p></li></ul></div></li></ul></div></section>
<section id="useful_extensions"><h2>Useful extensions</h2><div class="ulist"><ul><li><p>Public API creation: <a href="https://github.com/metosin/compojure-api" class="bare">https://github.com/metosin/compojure-api</a></p></li><li><p>Public API creation: <a href="https://clojure-liberator.github.io/liberator/" class="bare">https://clojure-liberator.github.io/liberator/</a></p></li><li><p>GraphQL: <a href="https://github.com/walmartlabs/lacinia" class="bare">https://github.com/walmartlabs/lacinia</a></p></li></ul></div></section>
<section id="making_http_requests"><h2>Making HTTP requests</h2><div class="ulist"><ul><li><p>clj-http <a href="https://github.com/dakrone/clj-http" class="bare">https://github.com/dakrone/clj-http</a></p></li><li><p>See examples/communicating-services/insurance-policy-application-processor</p><div class="literalblock"><div class="content"><pre>[clj-http "0.6.0"]</pre></div></div>
<div class="literalblock"><div class="content"><pre>(ns myns (:require [clj-http.client :as client]))
(client/get (str "http://customer-data-service:3000/customer/" id))</pre></div></div></li></ul></div></section>
<section id="multiple_services"><h2>Multiple services</h2><div class="paragraph"><p>See examples/communicating-services</p></div></section>
<section id="managing_multiple_services_with_docker_compose"><h2>Managing multiple services with docker-compose</h2><div class="paragraph"><p>See examples/communicating-services/docker-compose.yml</p></div>
<div class="ulist"><ul><li><p>Building</p></li><li><p>Deploying</p></li><li><p>Reloading code while developing multiple services</p></li></ul></div></section>
<section id="security_and_configuration"><h2>Security and configuration</h2><div class="ulist"><ul><li><p>Follow the Twelve-Factor App <a href="https://12factor.net/" class="bare">https://12factor.net/</a></p><div class="ulist"><ul><li><p>Store configuration in the environment</p></li></ul></div></li><li><p>Don&#8217;t store configuration in source control</p></li><li><p>Don&#8217;t expose endpoints publicly</p></li><li><p>Authentication/authorization for public endpoints: <a href="https://github.com/cemerick/friend" class="bare">https://github.com/cemerick/friend</a></p></li></ul></div></section>
<section id="gen_class"><h2>5) <code>:gen-class</code></h2><div class="paragraph"><p>What is the purpose of <code>:gen-class</code>?</p></div>
<div class="ulist"><ul><li><p><code>gen-class</code> creates a Java class</p></li><li><p>You can specify AOT namespaces in the project.clj file</p></li><li><p><code>lein compile</code> to build the class</p></li><li><p>Prefer using <code>reify</code>, <code>deftype</code>, <code>defrecord</code> to implement Java classes</p></li><li><p>Avoid <code>gen-class</code> and AOT</p></li><li><p>But why is it used so often?</p></li></ul></div></section>
<section id="executable_jars"><h2>Executable jars</h2><div class="ulist"><ul><li><p>An uberjar contains all your project dependencies.</p></li><li><p>If it contains a main class then it will also be executable:</p><div class="literalblock"><div class="content"><pre>java -jar myuber.jar</pre></div></div></li><li><p>A common way to make an executable uberjar is:</p></li></ul></div>
<div class="paragraph"><p>src/myns/core.clj</p></div>
<div class="literalblock"><div class="content"><pre>(ns myns.core
  (:gen-class))
(defn -main [&amp; args]
  (println "Hello World"))</pre></div></div>
<div class="paragraph"><p>project.clj</p></div>
<div class="literalblock"><div class="content"><pre>:main myns.core
:aot [myns.core]</pre></div></div></section>
<section id="aot_is_about_when_compilation_happens"><h2>AOT is about when compilation happens</h2><div class="literalblock"><div class="content"><pre>(ns my.app)
(def password (System/getenv "PASSWORD"))</pre></div></div>
<div class="paragraph"><p>Behaves differently if evaluated during AOT than during Runtime.</p></div>
<div class="ulist"><ul><li><p>In AOT it is captured during the build prior to deployment.</p></li><li><p>At Runtime it is whatever is in the environment when the namespace is loaded.</p></li></ul></div></section>
<section id="when_would_it_help_to_aot"><h2>When would it help to AOT?</h2><div class="ulist"><ul><li><p>Shipping a binary without the source code</p></li><li><p>Marginally speeding up start time</p></li><li><p>Generating classes loadable directly from Java for interop purposes (Hadoop)</p></li><li><p>Platforms such as Android do not support custom class loaders for running new bytecode at runtime.</p></li></ul></div></section>
<section id="is_gen_class_mandatory"><h2>Is <code>:gen-class</code> mandatory?</h2><div class="ulist"><ul><li><p>No</p></li><li><p>See examples/aot/too-much-aot</p><div class="ulist"><ul><li><p>An example where aot is causing undesirable behavior</p></li></ul></div></li><li><p>See examples/aot/no-aot</p><div class="ulist"><ul><li><p>Clojure provides an entrypoint <code>java -cp myuber.jar clojure.main -m myns.core</code></p></li><li><p>Clojure compiles all code you load on-the-fly into JVM bytecode</p></li></ul></div></li><li><p>See examples/aot/little-aot</p><div class="ulist"><ul><li><p>Avoid transitive aot by providing a bootstrap</p></li><li><p>Produces an executable jar</p></li></ul></div></li></ul></div></section>
<section id="more_on_macros"><h2>6) More on Macros</h2><div class="paragraph"><p>Examples (different usage scenarios) and elaboration required for Macros.</p></div>
<div class="ulist"><ul><li><p>Many Clojure primitives such as <code>defn</code> are macros</p></li><li><p>Macros provide syntax but are not values</p></li><li><p><a href="https://lispcast.com/when-to-use-a-macro/" class="bare">https://lispcast.com/when-to-use-a-macro/</a></p><div class="ulist"><ul><li><p>rarely</p></li><li><p>compile time</p></li><li><p>unevaluated arguments</p></li><li><p>inline code</p></li></ul></div></li><li><p>core.async</p><div class="ulist"><ul><li><p>macros over state machines to implement
Communicating Sequential Processes (CSP)</p></li><li><p>provides a new syntax (go blocks)</p></li><li><p>available as a library</p></li></ul></div></li></ul></div></section>
<section id="data_enrichment"><h2>7) Data enrichment</h2><div class="paragraph"><p>Require to know Clojure with Hadoop interaction for data enrichment with clojure specs.</p></div>
<div class="paragraph"><p><a href="https://github.com/clojure-cookbook/clojure-cookbook/tree/master/09_distributed-computation" class="bare">https://github.com/clojure-cookbook/clojure-cookbook/tree/master/09_distributed-computation</a></p></div></section>
<section id="sending_emails"><h2>8) Sending emails</h2><div class="paragraph"><p><a href="https://github.com/drewr/postal" class="bare">https://github.com/drewr/postal</a></p></div>
<div class="literalblock"><div class="content"><pre>(send-message
  {:host "mail.isp.net"}
  {:from "me@draines.com"
   :to "foo@example.com"
   :subject "Hi!"
   :body [{:type "text/html"
           :content "&lt;b&gt;Test!&lt;/b&gt;"}
          {:type :attachment
           :content (java.io.File. "/tmp/foo.txt")}
          {:type :inline
           :content (java.io.File. "/tmp/a.pdf")
           :content-type "application/pdf"}]})</pre></div></div>
<div class="paragraph"><p>You need a mail server.
(AWS Simple Email Service works well <a href="https://aws.amazon.com/ses/" class="bare">https://aws.amazon.com/ses/</a>)</p></div></section>
<section id="configuring_logs_on_masking_the_sensitive_data"><h2>Configuring logs on masking the sensitive data.</h2><div class="ulist"><ul><li><p>Clojure.tools.logging
<a href="https://github.com/clojure/tools.logging" class="bare">https://github.com/clojure/tools.logging</a></p></li><li><p>Timbre
<a href="https://github.com/ptaoussanis/timbre" class="bare">https://github.com/ptaoussanis/timbre</a></p></li><li><p>log4j</p></li><li><p>logback</p></li><li><p>commons logging</p></li><li><p>slf4j</p></li><li><p>Standard Java style configuration</p></li><li><p>"Bear Traps: the Logging Edition"
<a href="https://www.youtube.com/watch?v=jjuj-D4-hCE" class="bare">https://www.youtube.com/watch?v=jjuj-D4-hCE</a>
<a href="https://github.com/AlexanderMann/unclogging" class="bare">https://github.com/AlexanderMann/unclogging</a></p></li></ul></div></section>
<section id="dependencies"><h2>9) Dependencies</h2><div class="paragraph"><p>How to manage real time dependency management between projects</p></div>
<div class="ulist"><ul><li><p>lein checkouts</p></li><li><p>lein install</p></li><li><p><a href="https://github.com/amperity/lein-monolith" class="bare">https://github.com/amperity/lein-monolith</a></p></li><li><p><a href="https://github.com/ladderlife/loonie" class="bare">https://github.com/ladderlife/loonie</a></p></li></ul></div></section>
<section id="industry_design_patterns_for_clojure"><h2>10) Industry design patterns for Clojure</h2><div class="ulist"><ul><li><p><a href="https://github.com/clojure-cookbook/clojure-cookbook" class="bare">https://github.com/clojure-cookbook/clojure-cookbook</a></p></li><li><p><a href="http://mishadoff.com/blog/clojure-design-patterns/" class="bare">http://mishadoff.com/blog/clojure-design-patterns/</a></p></li></ul></div></section>
<section id="profile_clj"><h2>11) Profile.clj</h2><div class="paragraph"><p>What is Profile.clj capable of doing?</p></div>
<div class="ulist"><ul><li><p><code>profile.clj</code> is merged with any <code>project.clj</code>.</p></li><li><p>Having a <code>profile.clj</code> allows you to have common dependencies or tasks.</p></li><li><p>Example: <code>lein-test-refresh</code> plugin</p></li></ul></div>
<div class="paragraph"><p>Is it like getting the jar from repo, defining plugins, is that all?</p></div>
<div class="ulist"><ul><li><p>Pretty much&#8230;&#8203;</p></li><li><p>Capable of anything <code>project.clj</code> can do, but usually just for tools.</p></li></ul></div>
<div class="paragraph"><p>Or do we have more to explore. (need more clarity and reference links)</p></div>
<div class="ulist"><ul><li><p><a href="https://github.com/technomancy/leiningen/blob/master/doc/PROFILES.md" class="bare">https://github.com/technomancy/leiningen/blob/master/doc/PROFILES.md</a></p></li></ul></div></section>
<section id="common_plugins_for_profiles_clj"><h2>Common plugins for profiles.clj</h2><div class="ulist"><ul><li><p>lein-test-refresh</p></li><li><p>Ancient</p></li><li><p>Ultra</p></li><li><p>humane-test-output</p></li><li><p>Eastwood</p></li><li><p>Kibit</p></li><li><p>Bikeshed</p></li><li><p>Alembic</p></li></ul></div></section>
<section id="project_clj"><h2>12) Project.clj</h2><div class="paragraph"><p>What is Project.clj capable of doing to the project?
Where does this scope live?
Unlike the above one, require reference materials.</p></div>
<div class="paragraph"><p><a href="https://github.com/technomancy/leiningen/blob/master/sample.project.clj" class="bare">https://github.com/technomancy/leiningen/blob/master/sample.project.clj</a>
<a href="https://github.com/technomancy/leiningen/blob/stable/doc/TUTORIAL.md" class="bare">https://github.com/technomancy/leiningen/blob/stable/doc/TUTORIAL.md</a></p></div></section></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/lib/js/head.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/js/reveal.js"></script><script>// See https://github.com/hakimel/reveal.js#configuration for a full list of configuration options
Reveal.initialize({
  // Display controls in the bottom right corner
  controls: false,
  // Display a presentation progress bar
  progress: true,
  // Set a per-slide timing for speaker notes, null means none
  defaultTiming: null,
  // Display the page number of the current slide
  slideNumber: false,
  // Push each slide change to the browser history
  history: false,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Vertical centering of slides
  center: false,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // Randomizes the order of slides each time the presentation loads
  shuffle: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Flags if we should show a help overlay when the questionmark
  // key is pressed
  help: true,
  // Flags if speaker notes should be visible to all viewers
  showNotes: false,
  // Global override for autolaying embedded media (video/audio/iframe)
  // - null: Media will only autoplay if data-autoplay is present
  // - true: All media will autoplay, regardless of individual setting
  // - false: No media will autoplay, regardless of individual setting
  autoPlayMedia: null,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  previewLinks: false,
  // Theme (e.g., beige, black, league, night, serif, simple, sky, solarized, white)
  // NOTE setting the theme in the config no longer works in reveal.js 3.x
  //theme: Reveal.getQueryHash().theme || 'simple',
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: Reveal.getQueryHash().transition || 'none',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 960,
  height: 700,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      
      { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/zoom-js/zoom.js', async: true },
      { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/notes/notes.js', async: true }
  ]
});</script></body></html>